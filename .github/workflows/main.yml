name: 'Build and Test'

on:
    workflow_dispatch:
    pull_request:
    push:

jobs:
    build:
        name: Build git-changesets
        runs-on: ubuntu-latest
        steps:
            - uses: actions/checkout@v2
            - run: |
                  yarn
            - run: |
                  yarn build
    test:
        name: Test git-changesets
        runs-on: ubuntu-latest
        steps:
            - name: Checkout
              uses: actions/checkout@v2

            - name: Debug
              run: git --version

            - id: files
              name: Run the action
              uses: ./

            - name: Print steps context output
              run: |
                  echo 'steps.files.outputs.all=${{ steps.files.outputs.all }}'
                  echo 'steps.files.outputs.added=${{ steps.files.outputs.added }}'
                  echo 'steps.files.outputs.modified=${{ steps.files.outputs.modified }}'
                  echo 'steps.files.outputs.removed=${{ steps.files.outputs.removed }}'
                  echo 'steps.files.outputs.renamed=${{ steps.files.outputs.renamed }}'
                  echo 'steps.files.outputs.added_modified=${{ steps.files.outputs.added_modified }}'
